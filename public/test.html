<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>다각형에 이벤트 등록하기2</title>
	<style>
		.area {
			position: absolute;
			background: #fff;
			border: 1px solid #888;
			border-radius: 3px;
			font-size: 12px;
			top: -5px;
			left: 15px;
			padding: 2px;
		}

		.info {
			font-size: 12px;
			padding: 5px;
		}

		.info .title {
			font-weight: bold;
		}
	</style>
</head>

<body>
	<div id="map" style="width:100%;height:350px;"></div>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script type="text/javascript"
		src="//dapi.kakao.com/v2/maps/sdk.js?appkey=d21bba611d5b2617ceca0bb656175c49"></script>
	<script>
		// 지도에 폴리곤으로 표시할 영역데이터 배열입니다 
		$.getJSON("data/korea.json", function (geojson) {
			var data = geojson.features;
			var coodinates = [];
			var name = '';

			$.each(data, function (index, val) {
				coodinates = val.geometry.coodinates;
				name = val.properties.SIG_KOR_NM;
				displayArea(coordinates, nam);
			})
		})

		var polygons = [];


		function displayArea(coordinates, name) {

			// 다각형을 생성합니다 
			var path = [];
			var points = [];

			$.each(coordinates[0], function (index, coordinates) {
				var point = new Object();
				point.x = coodinates[1];
				point.y = coodinates[0];
				points.push(point);
				path.push(new kakao.maps.LatLng(coordinates[1], coordinates[0]));
			})
			var polygon = new kakao.maps.Polygon({
				map: map, // 다각형을 표시할 지도 객체
				path: area.path,
				strokeWeight: 2,
				strokeColor: '#004c80',
				strokeOpacity: 0.8,
				fillColor: '#fff',
				fillOpacity: 0.7
			});
			polygons.push(polygon);

			kakao.maps.event.addListener(polygon, 'mouseover', function(mouseEvent){
				polygon.setOptions({
					fillColor : '#09f'
				});
				customOverlay.setContent('<div class = "area">' + name + '</div>')
				customOverlay.setPostion(mouseEvent.latLng);
				customOverlay.setMap(map);

			});
			kakao.maps.event.addListener(polygon, 'mousemove', function(mouseEvent){
				customOverlay.setPostion(mouseEvent.latLng);
			});
			kakao.maps.event.addListener(polygon, 'mouseout', function(){
				polygon.setOptions({
					fillColor : '#fff'
				});
				CustomOverlay.setMap(null)
			});
			kakao.maps.event.addListener(polygon, 'click', function (mouseEvent) {
				var content = '<div class="info">' +
					'   <div class="title">' + area.name + '</div>' +
					'   <div class="size">총 면적 : 약 ' + Math.floor(polygon.getArea()) + ' m<sup>2</sup></area>' +
					'</div>';

				infowindow.setContent(content);
				infowindow.setPosition(mouseEvent.latLng);
				infowindow.setMap(map);
			});

		}
	</script>
</body>

</html>